# CLAUDE.md

このファイルは、Claude Code (claude.ai/code) がこのリポジトリでコードを扱う際のガイダンスを提供します。

## プロジェクト概要

AITestbedは、ユーザーの現在地や検索した都市の現在の天気情報と予報を提供するために設計された天気予報Webアプリケーションプロジェクトです。このアプリケーションは、モバイルとデスクトッププラットフォームの両方をサポートするレスポンシブデザインを備えたモダンなUI/UXに焦点を当てています。

## 技術スタック

- **フロントエンドフレームワーク**: Fresh (Preactベース)
- **スタイリング**: Tailwind CSS
- **状態管理**: Preact Signals
- **ランタイム**: Deno
- **言語**: TypeScript
- **外部API**: OpenWeatherMap API

## Git ワークフロー

このプロジェクトでは **GitHub Flow** を使用します：

1. **メインブランチ**: `main` ブランチは常にデプロイ可能な状態を保つ
2. **フィーチャーブランチ**: 新機能や修正のために `main` から新しいブランチを作成
3. **ブランチ命名規則**: 
   - `feature/機能名` (新機能)
   - `fix/修正内容` (バグ修正)
   - `refactor/リファクタリング内容` (リファクタリング)
4. **プルリクエスト**: 作業完了後、`main` ブランチに向けてプルリクエストを作成
5. **レビュー**: コードレビュー後にマージ
6. **CI/CD**: プルリクエストとマージ時に自動テスト・フォーマット・Lintを実行

## 開発コマンド

これはFresh/Denoプロジェクトなので、以下の標準コマンドを使用してください：

```bash
# 開発サーバーを起動
deno task start

# テストを実行
deno test

# コードをフォーマット
deno fmt

# Lintを実行
deno lint

# 型チェックを実行
deno check **/*.ts
```

## 実装する主要機能

- ブラウザのGeolocation APIを使用した現在地の天気表示
- オートコンプリート機能付きの都市検索
- 時間別詳細を含む5日間の詳細予報
- ダーク/ライトテーマの切り替え
- オフライン機能付きPWAサポート
- レスポンシブデザイン（モバイル、タブレット、デスクトップ）
- 気温と降水量のチャート
- 検索履歴（localStorage、最大10都市）

## アーキテクチャメモ

- APIルートはOpenWeatherMap連携を処理する必要があります
- 天気データインターフェースは docs/requirement.md:200 で定義されています
- ネットワーク、位置情報、API障害に対する適切なエラーハンドリングを実装
- パフォーマンス最適化のためAPIレスポンスを5分間キャッシュ
- Core Web Vitals「Good」評価とLighthouseスコア90+を目標
- Geolocation API アクセスにはHTTPSが必要

## API レート制限

OpenWeatherMap APIは無料プランで1日1000回の呼び出しに制限されています。
